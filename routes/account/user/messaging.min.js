'use strict';const express=require("express"),app=express(),router=express.Router(),User=require("../../../models/User"),Messaging=require("../../../models/Messaging");router.all("/*",(b,c,a)=>{b.app.locals.layout="messaging";a()});router.get("/",(b,c)=>{c.redirect("/user")});router.get("/:id",(b,c)=>{User.findOne({_id:b.params.id}).then(a=>{c.render("accounts/user/messaging",{title:"Messaging",user:a})}).catch(a=>console.log(a))});
router.post("/create",(b,c)=>{const a=new Messaging;a.sender=b.body.sender;a.receiver=b.body.receiver;a.msg=b.body.msg;a.save().then(d=>{c.redirect("back")}).catch(d=>console.log(d))});module.exports=router;