'use strict';const express=require("express"),app=express(),router=express.Router(),Rating=require("../../../models/Rating"),User=require("../../../models/User"),Company=require("../../../models/Company");router.all("/*",(e,f,a)=>{e.app.locals.layout="admin";a()});
router.get("/",(e,f)=>{Rating.countDocuments().then(a=>{User.countDocuments().then(b=>{User.find({role:"Manager"}).then(c=>{let g=Object.keys(c).length;Company.countDocuments().then(d=>{f.render("accounts/admin/index",{title:"nodeRatingx|Admin",usersCount:b,companyCount:d,ratingCount:a,managerCount:g})}).catch(d=>console.log(d))}).catch(c=>console.log(c))}).catch(b=>console.log(b))}).catch(a=>console.log(a))});module.exports=router;