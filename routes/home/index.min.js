'use strict';const express=require("express"),app=express(),router=express.Router(),Company=require("../../models/Company");router.all("/*",(b,c,a)=>{b.app.locals.layout="home";a()});router.get("/",(b,c)=>{null!=b.session.cookie.originalMaxAge?c.redirect("/admin"):c.render("home/index",{title:"nodeRatingx|Home"})});
router.get("/company",(b,c)=>{const a=b.query.page||1;Company.find().skip(5*a-5).limit(5).then(d=>{Company.countDocuments().then(e=>{c.render("home/company",{title:"Companies|Home",companies:d,current:parseInt(a),pages:Math.ceil(e/5)})}).catch(e=>console.log(e))}).catch(d=>console.log(d))});router.get("/single_company/:id",(b,c)=>{Company.findOne({_id:b.params.id}).then(a=>{c.render("home/single_company",{title:`${a.name}`,company:a})}).catch(a=>console.log(a))});module.exports=router;